(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{JdDf:function(e,t,r){"use strict";r.r(t),r.d(t,"AuthModule",function(){return q});var o=r("ofXK"),i=r("tyNb"),n=r("mrSG"),a=r("3Pt+"),s=r("fXoL"),l=r("G7TF"),c=r("aOJN"),m=r("tC3r"),u=r("ejJU"),d=r("IO1d"),h=r("zkoq"),b=r("kmnG"),p=r("qFsG"),f=r("bTqV");function g(e,t){if(1&e&&(s.Vb(0,"mat-error"),s.Ac(1),s.Ub()),2&e){const e=s.hc();s.Db(1),s.Cc(" ",e.getErrorMessage("email")," ")}}function v(e,t){if(1&e&&(s.Vb(0,"mat-error"),s.Ac(1),s.Ub()),2&e){const e=s.hc();s.Db(1),s.Cc(" ",e.getErrorMessage("password")," ")}}let w=(()=>{class e{constructor(e,t,r,o,i,n,a){this.formBuilder=e,this.router=t,this.authService=r,this.loaderService=o,this.alertService=i,this.generalService=n,this.localizationService=a,this.errors={},this.emailRegx=/^(([^<>+()\[\]\\.,;:\s@"-#$%&=]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/}ngOnInit(){this.form=this.formBuilder.group({email:["admin@gmail.com",[a.r.required,a.r.pattern(this.emailRegx)]],password:["11111111",a.r.required]})}submit(e){return Object(n.a)(this,void 0,void 0,function*(){if(e.preventDefault(),this.form.valid){this.loaderService.showLocalLoader();try{const e=yield this.authService.login(this.form.value);localStorage.setItem("credentials",JSON.stringify(e)),this.loaderService.hideLocalLoader(),this.generalService.userEvent.next(e.user),yield this.router.navigate(["ro/users"])}catch(t){this.loaderService.hideLocalLoader(),this.alertService.showError(t.error.message)}}else this.form.markAllAsTouched()})}getErrorMessage(e){const t=this.form.controls[e];return this.errors[e]?this.errors[e]:t.hasError("required")?this.localizationService.translate("global_validation.required"):t.hasError("minlength")?`${this.localizationService.translate("global_validation.minlength")} ${t.errors.minlength.requiredLength} (${t.errors.minlength.actualLength})`:t.hasError("maxlength")?`${this.localizationService.translate("global_validation.maxlength")} ${t.errors.maxlength.requiredLength} (${t.errors.maxlength.actualLength}). `:t.hasError("email")?"Not a valid email":""}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(a.e),s.Pb(i.c),s.Pb(l.a),s.Pb(c.a),s.Pb(m.a),s.Pb(u.a),s.Pb(d.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-login"]],decls:28,vars:5,consts:[[1,"title"],[1,"example-container"],[1,"form-container"],[3,"formGroup"],["cols","12","rowHeight","100px"],["colspan","12"],["appearance","outline",1,"full-width","mx-5"],["translate","roles.fields.email"],["matInput","","placeholder","Placeholder",3,"formControl","keyup.enter"],[4,"ngIf"],["translate","roles.fields.password"],["type","password","matInput","","placeholder","Placeholder",3,"formControl","keyup.enter"],[1,"text-right","full-width","pb-5"],["routerLink","/auth/forgot-password"],["mat-raised-button","","light","","type","submit","color","primary",1,"full-width",3,"click"],[1,"mt-10"],["routerLink","/auth/register",2,"margin-left","10px"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Ac(1,"Login"),s.Ub(),s.Vb(2,"div",1),s.Vb(3,"div",2),s.Vb(4,"form",3),s.Vb(5,"mat-grid-list",4),s.Vb(6,"mat-grid-tile",5),s.Vb(7,"mat-form-field",6),s.Vb(8,"mat-label",7),s.Ac(9," email"),s.Ub(),s.Vb(10,"input",8),s.dc("keyup.enter",function(e){return t.submit(e)}),s.Ub(),s.zc(11,g,2,1,"mat-error",9),s.Ub(),s.Ub(),s.Vb(12,"mat-grid-tile",5),s.Vb(13,"mat-form-field",6),s.Vb(14,"mat-label",10),s.Ac(15," password"),s.Ub(),s.Vb(16,"input",11),s.dc("keyup.enter",function(e){return t.submit(e)}),s.Ub(),s.zc(17,v,2,1,"mat-error",9),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Vb(18,"div",12),s.Vb(19,"a",13),s.Ac(20,"Forgot password?"),s.Ub(),s.Ub(),s.Vb(21,"div"),s.Vb(22,"button",14),s.dc("click",function(e){return t.submit(e)}),s.Ac(23," Log In "),s.Ub(),s.Ub(),s.Vb(24,"div",15),s.Ac(25," New user? "),s.Vb(26,"a",16),s.Ac(27," create account now. "),s.Ub(),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Db(4),s.mc("formGroup",t.form),s.Db(6),s.mc("formControl",t.form.controls.email),s.Db(1),s.mc("ngIf",t.getErrorMessage("email")),s.Db(5),s.mc("formControl",t.form.controls.password),s.Db(1),s.mc("ngIf",t.getErrorMessage("password")))},directives:[a.s,a.m,a.g,h.a,h.c,b.c,b.f,p.b,a.d,a.l,a.f,o.l,i.f,f.a,b.b],styles:[".example-container[_ngcontent-%COMP%]{text-align:center;background-color:var(--body)}.form-container[_ngcontent-%COMP%]{width:100%}@media (min-width:500px){.form-container[_ngcontent-%COMP%]{min-width:400px}}.form-field[_ngcontent-%COMP%]{display:block}"]}),e})();function y(e,t){return r=>{const o=r.controls[t];o.errors&&!o.errors.mustMatch||o.setErrors(r.controls[e].value!==o.value?{mustMatch:!0}:null)}}var k=r("Jo2N"),V=r("yZrb"),P=r("LRb0"),U=r("uVll"),x=r("vPOg");let S=(()=>{class e{constructor(e,t,r,o,i){this.formBuilder=e,this.router=t,this.loader=r,this.helpers=o,this.api=i,this.emailRegx=/^(([^<>+()\[\]\\.,;:\s@"-#$%&=]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,3}))$/,this.roles=[]}ngOnInit(){return Object(n.a)(this,void 0,void 0,function*(){this.createForm(),yield this.getRoles()})}createForm(){this.form=this.formBuilder.group({email:[null,[a.r.required,a.r.pattern(this.emailRegx)]],password:[null,a.r.required],confirmPassword:[null,a.r.required],name:[null,a.r.required],role:[null,a.r.required]},{validator:y("password","confirmPassword")})}submit(){return Object(n.a)(this,void 0,void 0,function*(){if(this.form.valid){this.loader.showLocalLoader();try{yield this.api.auth().register(this.form.value),yield this.router.navigate(["auth/login"])}catch(e){this.helpers.alert().showError(e.error.message)}this.loader.hideLocalLoader()}else this.form.markAllAsTouched()})}getRoles(){return Object(n.a)(this,void 0,void 0,function*(){try{this.roles=yield this.api.roles().getList()}catch(e){this.helpers.alert().showError(e.message)}})}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(a.e),s.Pb(i.c),s.Pb(c.a),s.Pb(k.a),s.Pb(V.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-register"]],decls:16,vars:14,consts:[[1,"title"],[1,"example-container"],[1,"form-container"],[3,"formGroup","keydown.enter"],[3,"control","label","keyup.enter"],[3,"type","control","label","keyup.enter"],["cols","12",3,"label","items","control"],[1,"text-right","pa-8"],["routerLink","/auth/login"],["type","submit","theme","primary","light","","type","submit",1,"btn","btn__submit","full-width",3,"click"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Ac(1,"Register"),s.Ub(),s.Vb(2,"div",1),s.Vb(3,"div",2),s.Vb(4,"form",3),s.dc("keydown.enter",function(e){return e.preventDefault()}),s.Vb(5,"form-input",4),s.dc("keyup.enter",function(){return t.submit()}),s.Ub(),s.Vb(6,"form-input",4),s.dc("keyup.enter",function(){return t.submit()}),s.Ub(),s.Vb(7,"form-input",5),s.dc("keyup.enter",function(){return t.submit()}),s.Ub(),s.Vb(8,"form-input",5),s.dc("keyup.enter",function(){return t.submit()}),s.Ub(),s.Qb(9,"form-select",6),s.Vb(10,"div",7),s.Vb(11,"a",8),s.Ac(12," Go to login "),s.Ub(),s.Ub(),s.Vb(13,"button",9),s.dc("click",function(){return t.submit()}),s.Ac(14," Register "),s.Ub(),s.Ub(),s.Ub(),s.Ub(),s.Qb(15,"app-loader")),2&e&&(s.Db(4),s.mc("formGroup",t.form),s.Db(1),s.mc("control",t.form.controls.name)("label","Name"),s.Db(1),s.mc("control",t.form.controls.email)("label","Email"),s.Db(1),s.mc("type","password")("control",t.form.controls.password)("label","password"),s.Db(1),s.mc("type","password")("control",t.form.controls.confirmPassword)("label","Confirm Password"),s.Db(1),s.mc("label","Role")("items",t.roles)("control",t.form.controls.role))},directives:[a.s,a.m,a.g,P.a,U.a,i.f,x.a],styles:[".example-container[_ngcontent-%COMP%]{text-align:center}.form-container[_ngcontent-%COMP%]{width:100%}@media (min-width:500px){.form-container[_ngcontent-%COMP%]{min-width:400px}}.form-field[_ngcontent-%COMP%]{display:block}.btn__submit[_ngcontent-%COMP%]{min-width:200px}"]}),e})(),L=(()=>{class e{constructor(e,t,r,o,i,n){this.formBuilder=e,this.router=t,this.route=r,this.authService=o,this.loaderService=i,this.alertService=n,this.token="",this.route.queryParams.subscribe(e=>{this.checkResetToken(e.token)})}ngOnInit(){this.createForm()}createForm(){this.form=this.formBuilder.group({repeat_password:[null,[a.r.required]],password:[null,[a.r.required,a.r.minLength(8),a.r.maxLength(100)]]},y("password","repeat_password"))}submit(e){return Object(n.a)(this,void 0,void 0,function*(){if(e.preventDefault(),!this.form.valid)return void this.form.markAllAsTouched();this.loaderService.showLocalLoader();const t={password:this.form.value.password,repeat_password:this.form.value.repeat_password,token:this.token};try{yield this.authService.resetPassword(t),yield this.router.navigate(["/"])}catch(r){this.alertService.showError(r.error.message)}this.loaderService.hideLocalLoader()})}checkResetToken(e){return Object(n.a)(this,void 0,void 0,function*(){this.loaderService.show();try{this.token=yield this.authService.checkResetToken({token:e})}catch(t){yield this.router.navigate(["/"])}})}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(a.e),s.Pb(i.c),s.Pb(i.a),s.Pb(l.a),s.Pb(c.a),s.Pb(m.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-reset"]],decls:11,vars:7,consts:[[1,"title"],[1,"example-container"],[1,"form-container"],[1,"mt-10",3,"formGroup"],[3,"type","control","label","keyup.enter"],["routerLink","/auth",1,"btn",2,"margin-left","10px"],["light","","type","submit","theme","primary",1,"btn",3,"click"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Ac(1,"Reset password"),s.Ub(),s.Vb(2,"div",1),s.Vb(3,"div",2),s.Vb(4,"form",3),s.Vb(5,"form-input",4),s.dc("keyup.enter",function(e){return t.submit(e)}),s.Ub(),s.Vb(6,"form-input",4),s.dc("keyup.enter",function(e){return t.submit(e)}),s.Ub(),s.Ub(),s.Vb(7,"button",5),s.Ac(8," Go to login "),s.Ub(),s.Vb(9,"button",6),s.dc("click",function(e){return t.submit(e)}),s.Ac(10," Reset "),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Db(4),s.mc("formGroup",t.form),s.Db(1),s.mc("type","password")("control",t.form.controls.password)("label","New password"),s.Db(1),s.mc("type","password")("control",t.form.controls.repeat_password)("label","Reepat new password"))},directives:[a.s,a.m,a.g,P.a,i.d],styles:[".example-container[_ngcontent-%COMP%]{text-align:center}.form-container[_ngcontent-%COMP%]{width:100%}@media (min-width:500px){.form-container[_ngcontent-%COMP%]{min-width:400px}}.form-field[_ngcontent-%COMP%]{display:block}"]}),e})();function O(e,t){if(1&e&&(s.Vb(0,"mat-error"),s.Ac(1),s.Ub()),2&e){const e=s.hc();s.Db(1),s.Cc(" ",e.getErrorMessage("email")," ")}}let A=(()=>{class e{constructor(e,t,r,o,i,n){this.formBuilder=e,this.router=t,this.authService=r,this.loaderService=o,this.alertService=i,this.localizationService=n,this.errors={}}ngOnInit(){this.createForm()}createForm(){this.form=this.formBuilder.group({email:[null,[a.r.required,a.r.email]]})}submit(e){return Object(n.a)(this,void 0,void 0,function*(){if(e.preventDefault(),this.form.valid){this.loaderService.showLocalLoader();try{const e=yield this.authService.forgotPassword(this.form.value.email);yield this.router.navigate(["/auth/login"]),this.alertService.showSuccess(e.message)}catch(t){this.alertService.showError(t.error.message)}this.loaderService.hideLocalLoader()}else this.form.markAllAsTouched()})}getErrorMessage(e){const t=this.form.controls[e];return this.errors[e]?this.errors[e]:t.hasError("required")?this.localizationService.translate("global_validation.required"):t.hasError("minlength")?`${this.localizationService.translate("global_validation.minlength")} ${t.errors.minlength.requiredLength} (${t.errors.minlength.actualLength})`:t.hasError("maxlength")?`${this.localizationService.translate("global_validation.maxlength")} ${t.errors.maxlength.requiredLength} (${t.errors.maxlength.actualLength}). `:t.hasError("email")?"Not a valid email":""}}return e.\u0275fac=function(t){return new(t||e)(s.Pb(a.e),s.Pb(i.c),s.Pb(l.a),s.Pb(c.a),s.Pb(m.a),s.Pb(d.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-forgot-password"]],decls:15,vars:3,consts:[[1,"title"],[1,"example-container"],[1,"form-container",2,"min-width","300px"],[1,"mt-10",3,"formGroup"],["appearance","outline",1,"full-width","mx-5"],["translate","roles.fields.email"],["matInput","","placeholder","Placeholder",3,"formControl","keyup.enter"],[4,"ngIf"],[1,"ml-10","mb-10","text-right"],["routerLink","/auth"],["mat-raised-button","","light","","type","submit","color","primary",1,"full-width",3,"click"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Ac(1,"Forgot password"),s.Ub(),s.Vb(2,"div",1),s.Vb(3,"div",2),s.Vb(4,"form",3),s.Vb(5,"mat-form-field",4),s.Vb(6,"mat-label",5),s.Ac(7," email"),s.Ub(),s.Vb(8,"input",6),s.dc("keyup.enter",function(e){return t.submit(e)}),s.Ub(),s.zc(9,O,2,1,"mat-error",7),s.Ub(),s.Ub(),s.Vb(10,"div",8),s.Vb(11,"a",9),s.Ac(12," Go to login "),s.Ub(),s.Ub(),s.Vb(13,"button",10),s.dc("click",function(e){return t.submit(e)}),s.Ac(14," Reset password "),s.Ub(),s.Ub(),s.Ub()),2&e&&(s.Db(4),s.mc("formGroup",t.form),s.Db(4),s.mc("formControl",t.form.controls.email),s.Db(1),s.mc("ngIf",t.getErrorMessage("email")))},directives:[a.s,a.m,a.g,b.c,b.f,p.b,a.d,a.l,a.f,o.l,i.f,f.a,b.b],styles:[".example-container[_ngcontent-%COMP%]{text-align:center}.form-container[_ngcontent-%COMP%]{width:100%}@media (min-width:500px){.form-container[_ngcontent-%COMP%]{min-width:400px}}.form-field[_ngcontent-%COMP%]{display:block}"]}),e})();var M=r("Wp6s");const _=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Jb({type:e,selectors:[["app-auth"]],decls:3,vars:0,consts:[[1,"login"],[1,"mat-elevation-z6"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"mat-card",1),s.Qb(2,"router-outlet"),s.Ub(),s.Ub())},directives:[M.a,i.h],styles:[".login[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;align-items:center;justify-content:center;background-color:var(--light)}"]}),e})(),children:[{path:"login",component:w},{path:"register",component:S},{path:"forgot-password",component:A},{path:"reset",component:L}]},{path:"*",redirectTo:"login",pathMatch:"full"}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({imports:[[i.g.forChild(_)],i.g]}),e})();var D=r("j1ZV"),E=r("NGJ7");let q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Nb({type:e}),e.\u0275inj=s.Mb({imports:[[o.c,C,D.a,a.h,a.q,i.g,E.a]]}),e})()}}]);