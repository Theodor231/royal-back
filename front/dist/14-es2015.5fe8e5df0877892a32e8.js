(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"S+wf":function(t,e,r){"use strict";r.r(e),r.d(e,"RolesModule",function(){return E});var n=r("ofXK"),i=r("OEvp"),o=r("fXoL"),a=r("Jo2N"),s=r("yZrb"),l=r("3Pt+"),c=r("tyNb"),d=r("Ly1/"),m=r("zkoq"),b=r("kmnG"),u=r("m1+a"),h=r("qFsG");let f=(()=>{class t extends i.a{constructor(t,e,r,n,i){super(t,e,r,n),this.helpers=t,this.api=e,this.formBuilder=r,this.route=n,this.router=i,this.pageSizeOptions=[5,10,25,100],this.module="roles"}createForm(){this.filter=this.formBuilder.group({name:[null],guard:[null],alias:[null]})}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(a.a),o.Pb(s.a),o.Pb(l.e),o.Pb(c.a),o.Pb(c.c))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-roles-index"]],features:[o.Ab],decls:18,vars:11,consts:[[3,"module","items","headers","columnsToDisplay","loading","showFilters","params","confirm","page","sort","update","filter","resetParams"],[3,"formGroup"],["cols","12","rowHeight","100px"],["colspan","4"],["appearance","outline",1,"full-width","mx-5"],["translate","roles.fields.name"],["matInput","","placeholder","Placeholder",3,"formControl"],["translate","roles.fields.alias"],["translate","Guard"]],template:function(t,e){1&t&&(o.Vb(0,"app-data-table",0),o.dc("confirm",function(t){return e.openConfirm(t)})("page",function(t){return e.changePage(t)})("sort",function(t){return e.sortData(t)})("update",function(){return e.loadData()})("filter",function(){return e.toggleFilters()})("resetParams",function(){return e.resetFilter()}),o.Vb(1,"form",1),o.Vb(2,"mat-grid-list",2),o.Vb(3,"mat-grid-tile",3),o.Vb(4,"mat-form-field",4),o.Vb(5,"mat-label",5),o.Ac(6," name"),o.Ub(),o.Qb(7,"input",6),o.Ub(),o.Ub(),o.Vb(8,"mat-grid-tile",3),o.Vb(9,"mat-form-field",4),o.Vb(10,"mat-label",7),o.Ac(11," alias"),o.Ub(),o.Qb(12,"input",6),o.Ub(),o.Ub(),o.Vb(13,"mat-grid-tile",3),o.Vb(14,"mat-form-field",4),o.Vb(15,"mat-label",8),o.Ac(16," guard"),o.Ub(),o.Qb(17,"input",6),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t&&(o.mc("module",e.module)("items",e.items)("headers",e.headers)("columnsToDisplay",e.columnsToDisplay)("loading",e.loading)("showFilters",e.showFilters)("params",e.params),o.Db(1),o.mc("formGroup",e.filter),o.Db(6),o.mc("formControl",e.filter.controls.name),o.Db(5),o.mc("formControl",e.filter.controls.alias),o.Db(5),o.mc("formControl",e.filter.controls.guard))},directives:[d.a,l.s,l.m,l.g,m.a,m.c,b.c,b.f,u.a,h.b,l.d,l.l,l.f],styles:["table[_ngcontent-%COMP%]{width:100%}.content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;box-sizing:border-box;max-width:100%;padding:20px;color:var(--text)}icon[_ngcontent-%COMP%]{font-weight:700}.actions[_ngcontent-%COMP%]{margin:15px 0;align-items:center;justify-content:space-between;font-size:20px}.actions[_ngcontent-%COMP%], .filter[_ngcontent-%COMP%]{display:flex;width:100%}.filter[_ngcontent-%COMP%]{flex-direction:column;padding:10px 0;-webkit-animation:show 1s;animation:show 1s;transition:max-height 1s ease}.filter__content[_ngcontent-%COMP%]{width:100%}.filter__footer[_ngcontent-%COMP%]{margin-left:auto}.filter__footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-radius:3px!important}.filter__footer--buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;margin:15px}.card[_ngcontent-%COMP%]{position:relative}@-webkit-keyframes show{0%{max-height:0;overflow:hidden}to{overflow:visible;max-height:600px}}@keyframes show{0%{max-height:0;overflow:hidden}to{overflow:visible;max-height:600px}}"]}),t})();var p=r("j1ZV"),g=r("6sSh"),x=r("FUS3"),_=r("mrSG"),v=r("Wp6s"),w=r("bTqV");function V(t,e){if(1&t&&(o.Vb(0,"mat-error"),o.Ac(1),o.Ub()),2&t){const t=o.hc();o.Db(1),o.Cc(" ",t.getErrorMessage("name")," ")}}function U(t,e){if(1&t&&(o.Vb(0,"mat-error"),o.Ac(1),o.ic(2,"json"),o.Ub()),2&t){const t=o.hc();o.Db(1),o.Cc(" ",o.jc(2,1,t.getErrorMessage("alias"))," ")}}function P(t,e){if(1&t&&(o.Vb(0,"mat-error"),o.Ac(1),o.ic(2,"json"),o.Ub()),2&t){const t=o.hc();o.Db(1),o.Cc(" ",o.jc(2,1,t.getErrorMessage("guard"))," ")}}let y=(()=>{class t{constructor(t,e,r,n,i){this.api=t,this.helpers=e,this.formBuilder=r,this.router=n,this.el=i,this.loading=!1,this.errors={}}ngOnInit(){this.form=this.formBuilder.group({name:[null,[l.r.required,l.r.minLength(2),l.r.maxLength(100)]],guard:[null,[l.r.required,l.r.minLength(2),l.r.maxLength(100)]],alias:[null,[l.r.required,l.r.minLength(2),l.r.maxLength(100)]]})}submit(){return Object(_.a)(this,void 0,void 0,function*(){if(this.form.valid){this.loading=!0;try{yield this.api.roles().create(this.form.value),this.helpers.alert().showSuccess("Successful created"),yield this.router.navigate([`${this.helpers.localization().activeLanguage}/roles`])}catch(t){t.error&&t.error.hasOwnProperty("errors")&&(this.errors=t.errors,setTimeout(()=>{this.errors={}},5e3)),this.helpers.alert().showError(t.message),this.loading=!1}}else this.form.markAllAsTouched()})}changeStatus(){this.form.markAllAsTouched(),document.getElementById("2").scrollIntoView(),setTimeout(()=>{this.scrollToFirstInvalidControl()},2e3)}scrollToFirstInvalidControl(){this.el.nativeElement.querySelector("form .ng-invalid").focus()}t(t){return this.helpers.localization().translate(t)}getErrorMessage(t){const e=this.form.controls[t];return this.errors[t]?this.errors[t]:e.hasError("required")?this.t("global_validation.required"):e.hasError("minlength")?`${this.t("global_validation.minlength")} ${e.errors.minlength.requiredLength} (${e.errors.minlength.actualLength})`:e.hasError("maxlength")?`${this.t("global_validation.maxlength")} ${e.errors.maxlength.requiredLength} (${e.errors.maxlength.actualLength}). `:e.hasError("email")?"Not a valid email":""}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(s.a),o.Pb(a.a),o.Pb(l.e),o.Pb(c.c),o.Pb(o.l))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-create"]],decls:31,vars:7,consts:[[2,"padding","40px 100px 40px"],[1,"mt-20"],[3,"formGroup"],["cols","12","rowHeight","100px"],["colspan","4"],["appearance","outline",1,"full-width","mx-5"],["translate","roles.fields.name"],["matInput","","placeholder","Placeholder",3,"formControl"],[4,"ngIf"],["translate","roles.fields.alias"],["translate","Guard"],[1,"d-flex","align-center","justify-end","full-width","pb-20"],["mat-button","","routerLink","../"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(o.Vb(0,"div",0),o.Vb(1,"mat-card"),o.Vb(2,"mat-card-title"),o.Ac(3,"Create"),o.Ub(),o.Vb(4,"mat-card-content",1),o.Vb(5,"form",2),o.Vb(6,"mat-grid-list",3),o.Vb(7,"mat-grid-tile",4),o.Vb(8,"mat-form-field",5),o.Vb(9,"mat-label",6),o.Ac(10," name"),o.Ub(),o.Qb(11,"input",7),o.zc(12,V,2,1,"mat-error",8),o.Ub(),o.Ub(),o.Vb(13,"mat-grid-tile",4),o.Vb(14,"mat-form-field",5),o.Vb(15,"mat-label",9),o.Ac(16," alias"),o.Ub(),o.Qb(17,"input",7),o.zc(18,U,3,3,"mat-error",8),o.Ub(),o.Ub(),o.Vb(19,"mat-grid-tile",4),o.Vb(20,"mat-form-field",5),o.Vb(21,"mat-label",10),o.Ac(22," guard"),o.Ub(),o.Qb(23,"input",7),o.zc(24,P,3,3,"mat-error",8),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(25,"mat-card-actions"),o.Vb(26,"div",11),o.Vb(27,"button",12),o.Ac(28,"cancel"),o.Ub(),o.Vb(29,"button",13),o.dc("click",function(){return e.submit()}),o.Ac(30," save "),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t&&(o.Db(5),o.mc("formGroup",e.form),o.Db(6),o.mc("formControl",e.form.controls.name),o.Db(1),o.mc("ngIf",e.getErrorMessage("name")),o.Db(5),o.mc("formControl",e.form.controls.alias),o.Db(1),o.mc("ngIf",e.getErrorMessage("alias")),o.Db(5),o.mc("formControl",e.form.controls.guard),o.Db(1),o.mc("ngIf",e.getErrorMessage("guard")))},directives:[v.a,v.f,v.c,l.s,l.m,l.g,m.a,m.c,b.c,b.f,u.a,h.b,l.d,l.l,l.f,n.l,v.b,w.a,c.d,b.b],pipes:[n.f],styles:["*[_ngcontent-%COMP%]{transition:all .5s ease-in-out}"]}),t})();var C=r("LRb0");let O=(()=>{class t{constructor(t,e,r,n,i){this.formBuilder=t,this.api=e,this.helpers=r,this.route=n,this.router=i,this.loading=!1,this.errors={},this.roles=[],this.id=null}ngOnInit(){this.createForm(),this.route.params.subscribe(t=>{(null==t?void 0:t.id)&&(this.id=t.id,this.getItem())})}submit(){return Object(_.a)(this,void 0,void 0,function*(){if(this.form.valid){this.loading=!0;try{yield this.api.roles().edit(this.id,this.form.value),this.helpers.alert().showSuccess("Successful edited."),yield this.router.navigate(["ro/roles"])}catch(t){t.hasOwnProperty("error")&&(this.errors=t.error,setTimeout(()=>{this.errors={}},5e3)),this.helpers.alert().showError(t.error.message)}this.loading=!1}})}getItem(){return Object(_.a)(this,void 0,void 0,function*(){this.loading=!0;try{const t=this.api.roles().getForEdit(this.id),e=this.helpers.setForm(t,this.form);this.form.setValue(Object.assign({},e))}catch(t){t.error.hasOwnProperty("errors")&&(this.errors=t.errors),this.helpers.alert().showError(t.error.message)}this.loading=!1})}translate(t){return this.helpers.localization().translate(t)}createForm(){this.form=this.formBuilder.group({name:[null,l.r.required],guard:[null,l.r.required],alias:[null,l.r.required]})}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(l.e),o.Pb(s.a),o.Pb(a.a),o.Pb(c.a),o.Pb(c.c))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-edit"]],decls:17,vars:15,consts:[[1,"container"],[1,"card"],[1,"card__header"],["text","text","translate","roles.headers.edit",1,"card__header--title","ml-10"],[1,"card__content","mt-10"],[1,"form",3,"formGroup"],["cols","12",1,"form__item",3,"label","control","error","keyup.enter"],["cols","12",1,"form__item",3,"icon","type","label","control","error","keyup.enter"],[1,"card__footer"],["routerLink","../../","text","text",1,"card__footer--btn","card__footer--cancel"],[1,"card__footer--btn","card__footer--submit",3,"click"]],template:function(t,e){1&t&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Vb(2,"div",2),o.Vb(3,"div",3),o.Ac(4,"Edit"),o.Ub(),o.Ub(),o.Vb(5,"div",4),o.Vb(6,"form",5),o.Vb(7,"form-input",6),o.dc("keyup.enter",function(){return e.submit()}),o.Ub(),o.Vb(8,"form-input",6),o.dc("keyup.enter",function(){return e.submit()}),o.Ub(),o.Vb(9,"form-input",6),o.dc("keyup.enter",function(){return e.submit()}),o.Ub(),o.Vb(10,"form-input",7),o.dc("keyup.enter",function(){return e.submit()}),o.Ub(),o.Ub(),o.Ub(),o.Vb(11,"div",8),o.Vb(12,"div"),o.Vb(13,"button",9),o.Ac(14," cancel "),o.Ub(),o.Vb(15,"button",10),o.dc("click",function(){return e.submit()}),o.Ac(16," submit "),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t&&(o.Db(6),o.mc("formGroup",e.form),o.Db(1),o.mc("label","Name")("control",e.form.controls.name)("error",e.errors.name),o.Db(1),o.mc("label","Alias")("control",e.form.controls.alias)("error",e.errors.alias),o.Db(1),o.mc("label","Guard")("control",e.form.controls.guard)("error",e.errors.guard),o.Db(1),o.mc("icon","flaticon-locked-padlock-outline")("type","password")("label","Password")("control",e.form.controls.password)("error",e.errors.password))},directives:[u.a,l.s,l.m,l.g,C.a,c.d],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:50px;align-items:center}.card[_ngcontent-%COMP%]{width:1024px;box-shadow:2px 2px 10px rgba(0,0,0,.5)!important;padding:20px;border-radius:5px}.card__header[_ngcontent-%COMP%]{margin-bottom:10px}.card__header--title[_ngcontent-%COMP%]{font-weight:700;font-size:20px}.card__content[_ngcontent-%COMP%], .card__content--item[_ngcontent-%COMP%]{box-sizing:border-box}.card__content--item[_ngcontent-%COMP%]{width:50%}.card__footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%;margin-top:20px;padding-top:10px}.card__footer--btn[_ngcontent-%COMP%]{background:transparent;outline:none;cursor:pointer;border:none;padding:8px;border-radius:3px;min-width:100px}.card__footer--submit[_ngcontent-%COMP%]{background:var(--primary);margin-left:5px;color:var(--light)}.card__footer--submit[_ngcontent-%COMP%]:hover{background:rgba(var(--primary-hover),.8)}.card__footer--cancel[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}.form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;box-sizing:border-box}"]}),t})();var M=r("WaCx");function k(t,e){if(1&t){const t=o.Wb();o.Vb(0,"div",11),o.dc("click",function(){o.tc(t);const r=e.$implicit;return o.hc().expand(r)}),o.Vb(1,"div",12),o.Vb(2,"span",7),o.Ac(3),o.Ub(),o.Ub(),o.Ub()}if(2&t){const t=e.$implicit,r=o.hc();o.Hb("selected",t.module===r.expandedItem.module),o.Db(3),o.Cc(" ",t.module," ")}}function D(t,e){if(1&t){const t=o.Wb();o.Vb(0,"option",21),o.dc("click",function(){o.tc(t);const r=e.$implicit,n=o.hc().index;return o.hc(2).selectFields(r,n)}),o.Ac(1),o.Ub()}if(2&t){const t=e.$implicit;o.mc("value",t),o.Db(1),o.Cc(" ",t," ")}}function I(t,e){if(1&t&&(o.Vb(0,"div",15),o.Vb(1,"div"),o.Vb(2,"label",16),o.Vb(3,"input",17),o.dc("ngModelChange",function(t){return e.$implicit.access=t}),o.Ub(),o.Vb(4,"span",18),o.Ac(5),o.Ub(),o.Ub(),o.Ub(),o.Vb(6,"div"),o.Vb(7,"select",19),o.dc("ngmodelChange",function(t){return e.$implicit.fields=t}),o.zc(8,D,2,2,"option",20),o.Ub(),o.Ub(),o.Ub()),2&t){const t=e.$implicit;o.Db(3),o.mc("ngModel",t.access),o.Db(2),o.Bc(t.action),o.Db(2),o.mc("ngmodel",t.fields),o.Db(1),o.mc("ngForOf",t.availableFields)}}function A(t,e){if(1&t&&(o.Vb(0,"div",13),o.zc(1,I,9,4,"div",14),o.Ub()),2&t){const t=o.hc();o.Db(1),o.mc("ngForOf",t.expandedItem.items)}}let F=(()=>{class t{constructor(t,e,r){this.api=t,this.helpers=e,this.permissions=[],this.loading=!1,this.alias=null,this.expandedItem={},r.params.subscribe(t=>{t.alias&&(this.alias=t.alias)})}ngOnInit(){return Object(_.a)(this,void 0,void 0,function*(){yield this.loadData()})}loadData(){return Object(_.a)(this,void 0,void 0,function*(){this.loading=!0;try{this.permissions=yield this.api.roles().getPermissions(this.alias)}catch(t){this.helpers.alert().showError(t.error.message)}this.loading=!1})}translate(t){return this.helpers.localization().translate(t)}expand(t){this.expandedItem=t&&this.expandedItem&&t.module===this.expandedItem.module?null:t}submit(){return Object(_.a)(this,void 0,void 0,function*(){try{yield this.api.roles().updatePermissions(this.permissions),this.helpers.alert().showSuccess("Successful updated!")}catch(t){this.helpers.alert().showSuccess(t.message)}})}selectFields(t,e){this.expandedItem.items[e].fields.some(e=>e===t)?this.expandedItem.items[e].fields.splice(e,1):this.expandedItem.items[e].fields.push(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(s.a),o.Pb(a.a),o.Pb(c.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-edit-permissions"]],decls:19,vars:4,consts:[[1,"content"],[1,"card","full-width"],[1,"actions"],[1,"btn",3,"title","click"],[1,"d-flex"],["class","elevation-1 my-5 pa-8 cursor-pointer d-flex",3,"selected","click",4,"ngFor","ngForOf"],["size","32",1,"ml-10"],["text","text"],["class","transition-all d-flex flex-wrap flex-stretch",4,"ngIf"],[1,"d-flex","full-width","align-end","justify-end"],[1,"card__footer--btn","card__footer--submit",3,"click"],[1,"elevation-1","my-5","pa-8","cursor-pointer","d-flex",3,"click"],[1,"ma-0"],[1,"transition-all","d-flex","flex-wrap","flex-stretch"],["class","pa-20 ma-10 elevation-1",4,"ngFor","ngForOf"],[1,"pa-20","ma-10","elevation-1"],["size","24","text","text",1,"d-flex","align-center","justify-center"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"ml-8"],["multiple","",3,"ngmodel","ngmodelChange"],[3,"value","click",4,"ngFor","ngForOf"],[3,"value","click"]],template:function(t,e){1&t&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Vb(2,"div",2),o.Qb(3,"div"),o.Vb(4,"div"),o.Vb(5,"button",3),o.dc("click",function(){return e.loadData()}),o.Vb(6,"icon"),o.Ac(7,"refresh"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(8,"div",4),o.Vb(9,"div"),o.zc(10,k,4,3,"div",5),o.Ub(),o.Vb(11,"div"),o.Vb(12,"div",6),o.Vb(13,"span",7),o.Ac(14),o.Ub(),o.Ub(),o.zc(15,A,2,1,"div",8),o.Ub(),o.Ub(),o.Vb(16,"div",9),o.Vb(17,"button",10),o.dc("click",function(){return e.submit()}),o.Ac(18," submit "),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t&&(o.Db(5),o.mc("title",e.translate("roles.buttons.load_data")),o.Db(5),o.mc("ngForOf",e.permissions),o.Db(4),o.Bc(e.expandedItem&&e.expandedItem.module),o.Db(1),o.mc("ngIf",e.expandedItem))},directives:[M.a,n.k,n.l,l.a,l.l,l.o,l.p,l.t],styles:["table[_ngcontent-%COMP%]{width:100%}.content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;box-sizing:border-box;max-width:100%;padding:20px}icon[_ngcontent-%COMP%]{font-weight:700}.actions[_ngcontent-%COMP%]{margin:15px 0;align-items:center;justify-content:space-between;font-size:20px}.actions[_ngcontent-%COMP%], .filter[_ngcontent-%COMP%]{display:flex;width:100%}.filter[_ngcontent-%COMP%]{flex-direction:column;padding:10px 0;-webkit-animation:show 1s;animation:show 1s;transition:max-height 1s ease}.filter__content[_ngcontent-%COMP%]{width:100%}.filter__footer[_ngcontent-%COMP%]{margin-left:auto}.filter__footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-radius:3px!important}.filter__footer--buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;margin:15px}.card[_ngcontent-%COMP%]{position:relative}.selected[_ngcontent-%COMP%]{background:var(--primary);color:var(--light)}@-webkit-keyframes show{0%{max-height:0;overflow:hidden}to{overflow:visible;max-height:600px}}@keyframes show{0%{max-height:0;overflow:hidden}to{overflow:visible;max-height:600px}}"]}),t})();var j=r("NGJ7");const z=[{path:"create",component:y},{path:"edit/:id",component:O},{path:"edit-permissions/:alias",component:F},{path:"page/:page",component:f},{path:"",redirectTo:"page/1",pathMatch:"full"},{path:":page",redirectTo:"page/1",pathMatch:"full"}];let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({imports:[[n.c,l.h,l.q,p.a,g.a,c.g.forChild(z),x.a,j.a]]}),t})()}}]);